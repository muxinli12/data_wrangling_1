---
title: "data manipulation"
author: "Muxin Li"
date: "2025-09-18"
output: github_document
---

```{r}
library(tidyverse)
```

let import data set
```{r}
litters_df=
  read_csv("data/FAS_litters.csv",na=c("NA",".",""))
litters_df=
  janitor::clean_names(litters_df)
pups_df=
  read_csv("data/FAS_pups.csv",skip=3,na=c("NA",".",""))
pups_df=
  janitor::clean_names(pups_df)
```
## select
select variables from my dataframe

```{r}
select(litters_df,group,litter_number,gd0_weight)
```
selet a group
```{r}
select(litters_df,group:gd_of_birth)
```
select by removal
```{r}
select(litters_df,-group)
select(litters_df,-(group:gd_of_birth))
```
select by prefix

```{r}
select(litters_df,group, starts_with("gd"))
```
rearrange by select
```{r}
select(litters_df, starts_with("gd"), group)
select(litters_df, litter_number, everything())
```

rename by select
```{r}
select(litters_df,GROUP=group,everything ())
rename(litters_df,GROUP=group)
```

what if i only selcet one variable，下面两种写法也可以
```{r}
select(litters_df,group)

pull(litters_df,group)
litters_df$group
```

```{r}
select(pups_df, litter_number, sex, pd_ears)
```

## fitter
use filter() to fiter out
```{r}
filter(litters_df, gd_of_birth==20,pups_born_alive==6)
```
look for more than 2 pups alive
```{r}
filter(litters_df, pups_born_alive>5)
filter(litters_df, pups_born_alive!=6)
```

match to a set
```{r}
filter(litters_df, group %in% c("Con7","Con8"))
```

filter out missing rows with "drop_na()"
```{r}
drop_na(litters_df)
drop_na(litters_df, gd0_weight)
```

```{r}

filter(pups_df, sex==1)
filter(pups_df,pd_walk<11,sex==2)
```

## "mutate"
use "mutate()" to create or modfity variables
```{r}
mutate(
  litters_df,
  wt_gain=  gd18_weight-gd0_weight,
  group=str_to_lower(group)
)
```
## arrange
"arrange" thing 排序,desc()反序
```{r}
arrange(litters_df,pups_born_alive)
arrange(litters_df,group,pups_born_alive)
arrange(litters_df, gd0_weight)
```
## pipes

```{r}
 litters_df=
  read_csv("data/FAS_litters.csv", na=c("NA",".",""))|>
  janitor::clean_names()|>
  select(group,litter_number, starts_with("gd"))|>
  drop_na()|>
  mutate( wt_gain=gd18_weight-gd0_weight
  )
```

